{"jsonrpc":"2.0","id":1,"method":"initialize","params":{"capabilities":{}}}
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///test.gdn","languageId":"garden","version":1,"text":"fun foo(s: String) {\n    s.\n}\n"}}}
{"jsonrpc":"2.0","id":2,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///test.gdn"},"position":{"line":1,"character":5}}}

// args: test-lsp
// expected stdout:
// {"id":1,"jsonrpc":"2.0","result":{"capabilities":{"completionProvider":{"triggerCharacters":["."]},"definitionProvider":true,"textDocumentSync":1},"serverInfo":{"name":"garden-lsp","version":"0.1.0"}}}
// {"jsonrpc":"2.0","method":"textDocument/publishDiagnostics","params":{"diagnostics":[{"message":"`foo` is never called.","range":{"end":{"character":7,"line":0},"start":{"character":4,"line":0}},"severity":2},{"message":"`String` is not a struct.","range":{"end":{"character":6,"line":1},"start":{"character":5,"line":1}},"severity":1}],"uri":"file:///test.gdn"}}
// {"id":2,"jsonrpc":"2.0","result":[{"detail":"(String): String","insertText":"strip_prefix($0)","insertTextFormat":2,"kind":2,"label":"strip_prefix"},{"detail":"(): String","insertText":"trim_left()","insertTextFormat":2,"kind":2,"label":"trim_left()"},{"detail":"(): List<String>","insertText":"lines()","insertTextFormat":2,"kind":2,"label":"lines()"},{"detail":"(String, String): String","insertText":"replace($0)","insertTextFormat":2,"kind":2,"label":"replace"},{"detail":"(String): Bool","insertText":"ends_with($0)","insertTextFormat":2,"kind":2,"label":"ends_with"},{"detail":"(Int, Int): String","insertText":"substring($0)","insertTextFormat":2,"kind":2,"label":"substring"},{"detail":"(String): List<String>","insertText":"split($0)","insertTextFormat":2,"kind":2,"label":"split"},{"detail":"(): Option<Int>","insertText":"as_int()","insertTextFormat":2,"kind":2,"label":"as_int()"},{"detail":"(List<String>): String","insertText":"join($0)","insertTextFormat":2,"kind":2,"label":"join"},{"detail":"(String): Bool","insertText":"contains($0)","insertTextFormat":2,"kind":2,"label":"contains"},{"detail":"(String): Option<(String, String)>","insertText":"split_once($0)","insertTextFormat":2,"kind":2,"label":"split_once"},{"detail":"(String): String","insertText":"strip_suffix($0)","insertTextFormat":2,"kind":2,"label":"strip_suffix"},{"detail":"(): Int","insertText":"len()","insertTextFormat":2,"kind":2,"label":"len()"},{"detail":"(String): Bool","insertText":"starts_with($0)","insertTextFormat":2,"kind":2,"label":"starts_with"},{"detail":"(): String","insertText":"trim()","insertTextFormat":2,"kind":2,"label":"trim()"},{"detail":"(): String","insertText":"trim_right()","insertTextFormat":2,"kind":2,"label":"trim_right()"},{"detail":"(): List<String>","insertText":"chars()","insertTextFormat":2,"kind":2,"label":"chars()"},{"detail":"(String): Option<Int>","insertText":"index_of($0)","insertTextFormat":2,"kind":2,"label":"index_of"}]}
